<!DOCTYPE html>
<html id="blue">
  <head>
<title>Final Project</title>
<meta charset="UTF-8" />
<link rel="shortcut icon" href="icon.ico" />
<link rel="stylesheet" href="FinalProject.css" type="text/css"/>
<script
src="https://code.jquery.com/jquery-3.5.1.js"
integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/2.3.0/mustache.min.js"></script>


<script id="SearchTemp" type="text/template">
  {{#items}}
  <div id="SearchMovie" tabindex='0'>
  <div id="SearchMovieCover">
  <h2>{{ volumeInfo.title }}</h2>
  <br>
  <p><img src="{{volumeInfo.imageLinks.thumbnail}}" alt="{{volumeInfo.title}}"></p>
  </div>
  <table>
    <tr>
      <th>Authors</th>
      <th>Catagories</th>
      <th>Publisher</th>
    </tr>
    <tr>
      <td> {{volumeInfo.authors}} </td>
      <td> {{volumeInfo.categories}} </td>
      <td> {{volumeInfo.publisher}} </td>
    </tr>
  </table>
  <h2>Description</h2>
  <p> {{volumeInfo.description}} </p>
  <br>
  </div>
</div>
{{/items}}
</script>
<script id="FavoritesTemp" type="text/template">
  {{#items}}
  <div id="FavoritesMovie" tabindex='0'>
  <div id="FavoritesMovieCover">
  <h2>{{ volumeInfo.title }}</h2>
  <br>
  <p><img src="{{volumeInfo.imageLinks.thumbnail}}" alt="{{volumeInfo.title}}"></p>
  </div>
  <table>
    <tr>
      <th>Authors</th>
      <th>Catagories</th>
      <th>Publisher</th>
    </tr>
    <tr>
      <td> {{volumeInfo.authors}} </td>
      <td> {{volumeInfo.categories}} </td>
      <td> {{volumeInfo.publisher}} </td>
    </tr>
  </table>
  <h2>Description</h2>
  <p> {{ volumeInfo.description }} </p>
  <br>
  </div>
</div>
{{/items}}
</script>
<script type="text/javascript">
/*variables*/
var startIndex=0;
var startIndex1=0;
var searchButton=1;
var FavoritesNavButtonBool=1;
var bool=0;
var totalResults=0;
var searchtext;  

/*page actions*/
$(document).ready(function(){
  $FavoritesSearch();
  $searchButtonColor();
  $FavoritesNavButtonColor();

$('input:radio[name="SearchDisplayOption"]').change(
  function(){
    if ($('#list_option_one').is(':checked') && $('#list_option_one').val() == 'l') {
      $('#searchResults').css('flex-direction','column');
      console.log("search column");
    }
    else{
      $('#searchResults').css('flex-direction','row');
      console.log("search row");
    }
  });
$('input:radio[name="FavoritesDisplayOption"]').change(
  function(){
    if ($('#list_option_two').is(':checked') && $('#list_option_two').val() == 'l') {
      $('#FavoritesResults').css('flex-direction','column');
      console.log("Favorites's shelf column");
    }
    else{
      $('#FavoritesResults').css('flex-direction','row');
      console.log("Favorites's shelf row");
    }
  });
  $('input:radio[name="WatchListDisplayOption"]').change(
  function(){
    if ($('#list_option_two').is(':checked') && $('#list_option_two').val() == 'l') {
      $('#WatchListResults').css('flex-direction','column');
      console.log("Favorites's shelf column");
    }
    else{
      $('#WatchListResults').css('flex-direction','row');
      console.log("Favorites's shelf row");
    }
  });
/*toggle actions*/
$("#HomeOption").click(function(){
    $clearpage();
    $('#Home').show();
   
});
$("#MenuOption").click(function(){
    $clearpage();
    $('WatchListTab').show();
    $('#Menu').show();
});

$('.FavoritesToggle').click(function(){
    $('#MenuNameWatchList').hide();
    $('#MenuNameFavorites').show();
    $('#WatchListResults').hide();
    $('#FavoritesResults').show();
    $('WatchListNav').hide();
    $('FavoritesNav').show();
    console.log("show favorites")
});

$('.WatchListToggle').click(function(){
    $('#MenuNameWatchList').show();
    $('#MenuNameFavorites').hide();
    $('#WatchListResults').show();
    $('#FavoritesResults').hide();
    $('WatchListNav').show();
    $('FavoritesNav').hide();
    console.log("Show watch List")
});

$("#SearchButton").click(function(){
      console.log("search submitted");
      searchtext = $('#textbox').val();
    
      if(searchtext == ''){
        alert("Please enter something to search");
    }
    else{
      if(bool > 0){
    console.log("clear");
    $clearbooksearch();
      }
    startIndex=0;
    searchButton=1;
    $searchMovie();
    $searchButtonColor();
    }
});
/*Nav buttons*/
$('#searchNavButton1', ).click(function(){
  $clearSearch();
  startIndex=0; 
  searchButton=1;
  $searchMovie();
  $searchButtonColor();
});
$('#searchNavButton2', ).click(function(){
  $clearSearch();
  startIndex=10; 
  searchButton=2;
  $searchMovie();
  $searchButtonColor();
});
$('#searchNavButton3', ).click(function(){
  $clearSearch();
  startIndex=20; 
  searchButton=3;
  $searchMovie();
  $searchButtonColor();
});
$('#searchNavButton4', ).click(function(){
  $clearSearch();
  startIndex=30; 
  searchButton=4;
  $searchbook();
  $searchButtonColor();
});
$('#searchNavButton5', ).click(function(){
  $clearbooksearch();
  startIndex=40; 
  searchButton=5;
  $searchbook();
  $searchButtonColor();
});
$('#FavoritesNavButton1', ).click(function(){
  $clearFavoritesSearch();
  startIndex1=0; 
  FavoritesNavButtonBool=1;
  $FavoritesSearch();
  $FavoritesNavButtonColor();
});
$('#FavoritesNavButton2', ).click(function(){
  $clearFavoritesSearch();
  startIndex1=10; 
  FavoritesNavButtonBool=2;
  $FavoritesSearch();
  $FavoritesNavButtonColor(); 
});

});

/*Functions*/
$clearpage = function(){
    $('#welcome').hide();
    $('#Home').hide();
    $('#Menu').hide();
    $('#search').hide();

};

$clearSearch = function(){
    $("div[id*='SearchMovie']").each(function (x, pj) {
    $(pj).remove();
    console.log("book removed");
 });
};

$clearFavoritesSearch = function(){
    $("div[id*='FavoritesMovie']").each(function (x, pj) {
    $(pj).remove();
    console.log("Favorites's page cleared");
 });
}
$clearWatchListSearch = function(){
    $("div[id*='WatchListMovie']").each(function (x, pj) {
    $(pj).remove();
    console.log("WatchList's page removed");
 });
};
$searchMovie = function(){
  $.get("https://www.googleapis.com/books/v1/volumes?q="+searchtext+"&startIndex="+startIndex, function(searchResponse){
    console.log(searchResponse);
    console.log("search from:" + startIndex);
    var searchdata, cover;
    
    
    bool++; 
   
    var template = $('#SearchTemp').html();
    var text = Mustache.render(template, searchResponse);
    $("#searchResults").html(text);
    console.log("book made");
    
    $("#searchNav").show();

  });
}


$FavoritesSearch=function(){
    $.get("https://www.googleapis.com/books/v1/users/100449795462524380304/bookshelves/1001/volumes?startIndex="+startIndex1, function(searchResponse){
   console.log(searchResponse);
   console.log("search from:" + startIndex1);
   totalResults=searchResponse.totalItems;
   console.log("total results:"+totalResults)
   
  
   var template = $('#FavoritesTemp').html();
   var text = Mustache.render(template, searchResponse);
   $("#FavoritesResults").html(text);
   console.log("book made");
  });
};
$searchButtonColor = function(){
  $searchButtonWhite();
  switch(searchButton){
    case 1:
      $("#searchNavButton1").css("background-color","rgba(211, 206, 206, 0.582)");
    break;
    case 2:      
      $("#searchNavButton2").css("background-color","rgba(211, 206, 206, 0.582)");
    break;
    case 3:     
      $("#searchNavButton3").css("background-color","rgba(211, 206, 206, 0.582)");
    break;
    case 4:    
      $("#searchNavButton4").css("background-color","rgba(211, 206, 206, 0.582)");
    break;
    case 5:
      $("#searchNavButton5").css("background-color","rgba(211, 206, 206, 0.582)");
    break;

  }
};
$searchButtonWhite = function(){
  $("#searchNavButton1").css("background-color","rgba(255, 255, 255, .7)");
  $("#searchNavButton2").css("background-color","rgba(255, 255, 255, .7)");
  $("#searchNavButton3").css("background-color","rgba(255, 255, 255, .7)");
  $("#searchNavButton4").css("background-color","rgba(255, 255, 255, .7)");
  $("#searchNavButton5").css("background-color","rgba(255, 255, 255, .7)");
};
$FavoritesNavButtonColor = function(){
  switch(FavoritesNavButtonBool){
    case 1:
      $("#FavoritesNavButton2").css("background-color","rgba(255, 255, 255, .7)");
      $("#FavoritesNavButton1").css("background-color","rgba(211, 206, 206, 0.582)");
      console.log("Favorite button color 1");
    break;
    case 2:
      $("#FavoritesNavButton1").css("background-color","rgba(255, 255, 255, .7)");
      $("#FavoritesNavButton2").css("background-color","rgba(211, 206, 206, 0.582)");
      console.log("Favorite button color 2");
    break;
  }
}

</script>
</head>
<nav>
  <p id="HomeOption">Home</p>
  <a href="https://baileyknez.azurewebsites.net/resume.html">
  </p><img src="logo.png" alt="home" height="45" width="53">
  </a>
  <p id="MenuOption">Menu</p> 

</nav>



<div id="welcome">
  <div class="glass">
    <h1>Welcome!</h1>
    <br>
    <p>Welcome to Bailey's book search and shelf. This page was made using google's Book API, AJAX, JQUERY, and Musache.js</p>
  </div>
    
  
</div>
<div id="Home">
  <div class="glass">
    <div class="searchbox">
      <h1>Home</h1>
        <input id="textbox" type="search" >
        <button id="SearchButton">  Search Books  </button>
      <p>Our Popular Movies at the moment</p>
    </div>
    
  </div>

  <div id="displayOption">
    <p>Display Options</p>
    <table>
      <tr>
       <td> 
         <input type="radio" id="list_option_one" name="SearchDisplayOption" value="l" checked="checked">
         <br>
        <label for="list_option_one">List</label>
      </td>
      <td>
        <input type="radio" id="grid_option_one" name="SearchDisplayOption" value="g">
        <br>
        <label for="grid_option_one">Grid</label>
      </td>
      </tr>
    </table>
  </div>
    <div id="HomeResults"></div>
    <div id="searchResults"></div>

    <div id="searchNav">
      <div id="searchNavContain">
      <br>
      <button id ="searchNavButton1" data-search="0">1</button>
      <button id ="searchNavButton2" data-search="10">2</button>
      <button id ="searchNavButton3" data-search="20">3</button>
      <button id ="searchNavButton4" data-search="30">4</button>
      <button id ="searchNavButton5" data-search="40">5</button>
      <br>
    </div>
    </div>
    <br>
  </div>
<div id="Menu">
  <div class="glass">
    <p><span class="FavoritesToggle">Favorites</span> | <span class="WatchListToggle">Watch List</span></p>
    <h1 id="MenuNameFavorites">Favorites</h1>
    <h1 id="MenuNameWatchList">Watch List</h1>
  </div>
  <div id="displayOption">
    <p>Display Options</p>
    <table>
      <tr>
       <td> 
         <input type="radio" id="list_option_two" name="FavoritesDisplayOption" value="l" checked="checked">
         <br>
        <label for="list_option_two">List</label>
      </td>
      <td>
        <input type="radio" id="grid_option_two" name="FavoritesDisplayOption" value="g">
        <br>
        <label for="grid_option_two">Grid</label>
      </td>
      </tr>
    </table>
  </div>
    <div id="FavoritesResults"></div>
    <div id="WatchListResults"></div>
    <div id="FavoritesNav">
    <div id="searchNavContain" >
      <br>
      <button id ="FavoritesNavButton1" data-search="0">1</button>
      <button id ="FavoritesNavButton2" data-search="10">2</button>
    </div>
  </div>
    <div id="WatchListNav">
    <div id="searchNavContain" >
      <br>
      <button id ="WatchListNavButton1" data-search="0">1</button>
      <button id ="WatchListNavButton2" data-search="10">2</button>
    </div>
  </div>

</div>
</div>
</div>
</html>
